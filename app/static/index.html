<!doctype html>
<html lang="es">
  <head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Comida R√°pida Fant√°stica - F√©lix, tu Amigo del Sabor</title>
    <script src="/static/js/app.js" type="module"></script>
    <link href="https://fonts.googleapis.com/css2?family=Fredoka+One:wght@400&family=Inter:wght@400;500;600&display=swap" rel="stylesheet">
    <style>
      :root {
        --primary-red: #FF4444;
        --primary-orange: #FF8800;
        --primary-yellow: #FFD700;
        --dark-red: #CC2222;
        --dark-orange: #DD6600;
        --green-accent: #22CC44;
        --background-cream: #FFF8F0;
        --text-dark: #2D1B1B;
        --text-light: #FFFFFF;
        --shadow: rgba(0, 0, 0, 0.15);
        --border-radius: 12px;
      }
      
      * {
        margin: 0;
        padding: 0;
        box-sizing: border-box;
      }
      
      body {
        font-family: 'Inter', sans-serif;
        background: linear-gradient(135deg, var(--background-cream) 0%, #FFF5E6 100%);
        color: var(--text-dark);
        line-height: 1.6;
        min-height: 100vh;
      }
      
      .container {
        display: grid;
        grid-template-columns: 350px 1fr 300px;
        gap: 20px;
        max-width: 1600px;
        margin: 0 auto;
        padding: 20px;
        min-height: 100vh;
      }
      
      /* Header */
      .header {
        grid-column: 1 / -1;
        text-align: center;
        background: linear-gradient(45deg, var(--primary-red), var(--primary-orange));
        color: var(--text-light);
        padding: 20px;
        border-radius: var(--border-radius);
        box-shadow: 0 4px 20px var(--shadow);
        margin-bottom: 20px;
      }
      
      .logo {
        font-family: 'Fredoka One', cursive;
        font-size: 2.5rem;
        margin-bottom: 8px;
        text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.3);
      }
      
      .tagline {
        font-size: 1.1rem;
        font-weight: 500;
        opacity: 0.95;
      }
      
      /* Menu Section */
      .menu-section {
        background: white;
        border-radius: var(--border-radius);
        box-shadow: 0 4px 20px var(--shadow);
        padding: 20px;
        height: fit-content;
        position: sticky;
        top: 20px;
      }
      
      .menu-title {
        font-family: 'Fredoka One', cursive;
        font-size: 1.5rem;
        color: var(--primary-red);
        margin-bottom: 20px;
        text-align: center;
        border-bottom: 2px solid var(--primary-yellow);
        padding-bottom: 10px;
      }
      
      .menu-category {
        margin-bottom: 25px;
      }
      
      .category-title {
        font-weight: 600;
        font-size: 1.1rem;
        color: var(--dark-red);
        margin-bottom: 12px;
        padding: 8px 12px;
        background: linear-gradient(45deg, var(--primary-yellow), #FFE55C);
        border-radius: 8px;
        text-align: center;
      }
      
      .menu-item {
        display: flex;
        justify-content: space-between;
        align-items: center;
        padding: 8px 12px;
        margin-bottom: 8px;
        background: var(--background-cream);
        border-radius: 8px;
        cursor: pointer;
        transition: all 0.3s ease;
        border: 1px solid transparent;
      }
      
      .menu-item:hover {
        background: var(--primary-yellow);
        transform: translateX(5px);
        border-color: var(--primary-orange);
      }
      
      .item-info {
        flex: 1;
      }
      
      .item-name {
        font-weight: 500;
        color: var(--text-dark);
        font-size: 0.9rem;
        margin-bottom: 2px;
      }
      
      .item-description {
        font-size: 0.75rem;
        color: #666;
        line-height: 1.3;
      }
      
      .item-price {
        font-weight: 600;
        color: var(--primary-red);
        font-size: 1rem;
        margin-left: 10px;
      }
      
      /* Order Section (Third Column) */
      .order-section {
        background: white;
        border-radius: var(--border-radius);
        box-shadow: 0 4px 20px var(--shadow);
        padding: 20px;
        height: fit-content;
        position: sticky;
        top: 20px;
      }
      
      /* Current Order Section */
      .current-order {
        background: white;
        border-radius: var(--border-radius);
        padding: 20px;
        border: 2px solid var(--green-accent);
        box-shadow: 0 2px 10px rgba(34, 204, 68, 0.2);
      }
      
      .order-title {
        font-family: 'Fredoka One', cursive;
        font-size: 1.3rem;
        color: var(--green-accent);
        margin-bottom: 20px;
        text-align: center;
        border-bottom: 2px solid var(--primary-yellow);
        padding-bottom: 10px;
      }
      
      .order-item {
        display: flex;
        justify-content: space-between;
        padding: 5px 0;
        border-bottom: 1px solid #eee;
        font-size: 0.9rem;
      }
      
      .order-total {
        font-weight: 600;
        font-size: 1.1rem;
        color: var(--primary-red);
        text-align: center;
        margin-top: 10px;
        padding-top: 10px;
        border-top: 2px solid var(--primary-yellow);
      }
      
      /* Chat Section */
      .chat-section {
        display: flex;
        flex-direction: column;
        background: white;
        border-radius: var(--border-radius);
        box-shadow: 0 4px 20px var(--shadow);
        overflow: hidden;
        height: calc(100vh - 200px);
        min-height: 600px;
      }
      
      .chat-header {
        background: linear-gradient(45deg, var(--primary-orange), var(--primary-yellow));
        color: var(--text-dark);
        padding: 15px 20px;
        text-align: center;
        font-weight: 600;
      }
      
      .felix-avatar {
        display: inline-block;
        width: 40px;
        height: 40px;
        background: var(--primary-red);
        border-radius: 50%;
        margin-right: 10px;
        vertical-align: middle;
        text-align: center;
        line-height: 40px;
        color: white;
        font-weight: bold;
        font-size: 1.2rem;
      }
      
      #messages {
        flex: 1;
        overflow-y: auto;
        padding: 20px;
        background: linear-gradient(to bottom, #FFFBF7, #FFF8F0);
        display: flex;
        flex-direction: column;
        scroll-behavior: smooth;
      }
      
      #messages p {
        margin-bottom: 16px;
        padding: 12px 16px;
        border-radius: 18px;
        max-width: 85%;
        word-wrap: break-word;
        animation: slideIn 0.3s ease-out;
      }
      
      .agent-message {
        background: linear-gradient(45deg, var(--primary-yellow), #FFE55C);
        color: var(--text-dark);
        align-self: flex-start;
        border-bottom-left-radius: 4px;
        border: 1px solid var(--primary-orange);
        font-weight: 500;
      }
      
      .user-message {
        background: linear-gradient(45deg, var(--primary-red), var(--dark-red));
        color: var(--text-light);
        align-self: flex-end;
        border-bottom-right-radius: 4px;
        margin-left: auto;
        font-weight: 500;
      }
      
      #messageForm {
        display: flex;
        gap: 10px;
        padding: 16px;
        background: var(--background-cream);
        border-top: 2px solid var(--primary-yellow);
      }
      
      #message {
        flex: 1;
        padding: 12px 16px;
        border: 2px solid var(--primary-orange);
        border-radius: 25px;
        font-size: 16px;
        outline: none;
        transition: all 0.2s ease;
        background: white;
      }
      
      #message:focus {
        border-color: var(--primary-red);
        box-shadow: 0 0 0 3px rgba(255, 68, 68, 0.3);
        transform: scale(1.02);
      }
      
      button {
        padding: 12px 20px;
        border: none;
        border-radius: 25px;
        font-size: 14px;
        font-weight: 600;
        cursor: pointer;
        transition: all 0.3s ease;
        text-transform: uppercase;
        letter-spacing: 0.5px;
      }
      
      #sendButton {
        background: linear-gradient(45deg, var(--primary-red), var(--dark-red));
        color: var(--text-light);
      }
      
      #sendButton:hover:not(:disabled) {
        transform: translateY(-2px) scale(1.05);
        box-shadow: 0 4px 15px rgba(255, 68, 68, 0.4);
      }
      
      #sendButton:disabled {
        background: #ccc;
        cursor: not-allowed;
        transform: none;
      }
      
      #startAudioButton {
        background: linear-gradient(45deg, var(--green-accent), #1AA033);
        color: var(--text-light);
      }
      
      #startAudioButton:hover:not(:disabled) {
        transform: translateY(-2px) scale(1.05);
        box-shadow: 0 4px 15px rgba(34, 204, 68, 0.4);
      }
      
      #stopAudioButton {
        background: linear-gradient(45deg, #FF6B6B, #FF5252);
        color: var(--text-light);
        display: none;
      }
      
      .status-indicator {
        display: flex;
        align-items: center;
        justify-content: center;
        margin-top: 15px;
        font-size: 14px;
        font-weight: 500;
        gap: 20px;
      }
      
      .status-item {
        display: flex;
        align-items: center;
        padding: 8px 15px;
        background: white;
        border-radius: 20px;
        box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
      }
      
      .status-dot {
        width: 8px;
        height: 8px;
        border-radius: 50%;
        background-color: #ccc;
        margin-right: 8px;
      }
      
      .status-dot.connected {
        background-color: var(--green-accent);
        animation: pulse 2s infinite;
      }
      
      .status-dot.recording {
        background-color: var(--primary-red);
        animation: pulse-recording 1s infinite;
      }
      
      /* Combo Highlights */
      .combo-section {
        background: linear-gradient(45deg, var(--green-accent), #22DD55);
        color: white;
        padding: 15px;
        border-radius: var(--border-radius);
        margin-bottom: 20px;
        text-align: center;
      }
      
      .combo-title {
        font-family: 'Fredoka One', cursive;
        font-size: 1.3rem;
        margin-bottom: 10px;
      }
      
      .combo-item {
        background: rgba(255, 255, 255, 0.2);
        margin: 8px 0;
        padding: 10px;
        border-radius: 8px;
        font-weight: 500;
      }
      
      .combo-savings {
        background: var(--primary-yellow);
        color: var(--text-dark);
        padding: 5px 10px;
        border-radius: 15px;
        font-weight: 600;
        display: inline-block;
        margin-top: 5px;
      }
      
      /* Responsive Design */
      @media (max-width: 768px) {
        .container {
          grid-template-columns: 1fr;
          padding: 10px;
        }
        
        .menu-section {
          position: static;
          order: 2;
        }
        
        .chat-section {
          order: 1;
          height: 500px;
        }
        
        #messageForm {
          flex-direction: column;
        }
        
        button {
          width: 100%;
        }
      }
      
      /* Animations */
      @keyframes slideIn {
        from { opacity: 0; transform: translateY(20px); }
        to { opacity: 1; transform: translateY(0); }
      }
      
      @keyframes pulse {
        0% { transform: scale(1); opacity: 1; }
        50% { transform: scale(1.2); opacity: 0.7; }
        100% { transform: scale(1); opacity: 1; }
      }
      
      @keyframes pulse-recording {
        0% { transform: scale(1); }
        50% { transform: scale(1.3); }
        100% { transform: scale(1); }
      }
      
      /* Special Effects */
      .sparkle {
        position: relative;
        overflow: hidden;
      }
      
      .sparkle::before {
        content: '‚ú®';
        position: absolute;
        top: 5px;
        right: 5px;
        font-size: 0.8rem;
        animation: sparkle 2s infinite;
      }
      
      @keyframes sparkle {
        0%, 100% { opacity: 0; transform: scale(0.5) rotate(0deg); }
        50% { opacity: 1; transform: scale(1) rotate(180deg); }
      }
      
      /* Order Item Styles */
      .order-item {
        display: flex;
        justify-content: space-between;
        align-items: center;
        padding: 8px 10px;
        border-bottom: 1px solid #eee;
        font-size: 0.9rem;
        animation: fadeIn 0.3s ease-out;
      }
      
      .order-item:last-child {
        border-bottom: none;
      }
      
      .order-item-details {
        flex: 1;
      }
      
      .order-item-name {
        font-weight: 500;
        color: var(--text-dark);
      }
      
      .order-item-quantity {
        font-size: 0.8rem;
        color: #666;
      }
      
      .order-item-price {
        font-weight: 600;
        color: var(--primary-red);
        margin-left: 10px;
      }
      
      /* Clear Order Button */
      .clear-order-btn {
        width: 100%;
        margin-top: 10px;
        background: linear-gradient(45deg, #FF6B6B, #FF5252);
        color: white;
        padding: 10px;
        border: none;
        border-radius: 8px;
        cursor: pointer;
        font-weight: 600;
        transition: all 0.3s ease;
      }
      
      .clear-order-btn:hover {
        transform: scale(1.02);
        box-shadow: 0 4px 15px rgba(255, 107, 107, 0.4);
      }
      
      /* Order Success Animation */
      @keyframes orderSuccess {
        0% { transform: scale(1); }
        50% { transform: scale(1.1); background-color: var(--green-accent); }
        100% { transform: scale(1); }
      }
      
      .order-success {
        animation: orderSuccess 0.5s ease-out;
      }
      
      /* Loading Spinner */
      .loading-spinner {
        display: inline-block;
        width: 20px;
        height: 20px;
        border: 3px solid rgba(0, 0, 0, 0.1);
        border-radius: 50%;
        border-top-color: var(--primary-orange);
        animation: spin 1s ease-in-out infinite;
      }
      
      @keyframes spin {
        to { transform: rotate(360deg); }
      }
      
      /* Quick Add Buttons */
      .quick-add {
        position: absolute;
        right: 10px;
        top: 50%;
        transform: translateY(-50%);
        display: none;
        gap: 5px;
      }
      
      .menu-item:hover .quick-add {
        display: flex;
      }
      
      .quick-add-btn {
        width: 25px;
        height: 25px;
        border-radius: 50%;
        border: none;
        background: var(--primary-red);
        color: white;
        font-weight: bold;
        cursor: pointer;
        transition: all 0.2s ease;
      }
      
      .quick-add-btn:hover {
        transform: scale(1.2);
        background: var(--dark-red);
      }

      /* Settings Modal Styles */
      .settings-modal {
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background: rgba(0, 0, 0, 0.6);
        display: none;
        z-index: 1000;
        backdrop-filter: blur(4px);
      }

      .settings-modal.show {
        display: flex;
        align-items: center;
        justify-content: center;
        animation: modalFadeIn 0.3s ease-out;
      }

      .modal-content {
        background: white;
        border-radius: 20px;
        max-width: 700px;
        width: 90%;
        max-height: 85vh;
        overflow: hidden;
        box-shadow: 0 20px 60px rgba(0, 0, 0, 0.3);
        animation: modalSlideIn 0.3s ease-out;
      }

      .modal-header {
        display: flex;
        justify-content: space-between;
        align-items: center;
        padding: 25px 30px;
        background: linear-gradient(45deg, var(--primary-orange), var(--primary-yellow));
        border-bottom: 1px solid #eee;
      }

      .modal-header h2 {
        margin: 0;
        font-family: 'Fredoka One', cursive;
        font-size: 1.8rem;
        color: var(--text-dark);
      }

      .close-button {
        background: none;
        border: none;
        font-size: 2rem;
        color: var(--text-dark);
        cursor: pointer;
        padding: 0;
        width: 40px;
        height: 40px;
        border-radius: 50%;
        display: flex;
        align-items: center;
        justify-content: center;
        transition: all 0.2s ease;
      }

      .close-button:hover {
        background: rgba(255, 255, 255, 0.3);
        transform: scale(1.1);
      }

      .modal-body {
        padding: 25px 30px;
        max-height: calc(85vh - 180px);
        overflow-y: auto;
      }

      .setting-group {
        margin-bottom: 30px;
        padding: 20px;
        background: #f8f9fa;
        border-radius: 15px;
        border: 1px solid #e9ecef;
      }

      .setting-group h3 {
        margin: 0 0 15px 0;
        font-weight: 600;
        color: var(--text-dark);
        font-size: 1.1rem;
        display: flex;
        align-items: center;
        gap: 8px;
      }

      /* Voice Control */
      .voice-control {
        display: flex;
        gap: 15px;
        align-items: center;
        flex-wrap: wrap;
      }

      #voice-select {
        flex: 1;
        min-width: 200px;
        padding: 12px 15px;
        border: 2px solid var(--primary-orange);
        border-radius: 10px;
        font-size: 16px;
        background: white;
        color: var(--text-dark);
        font-weight: 500;
      }

      #voice-select:focus {
        outline: none;
        border-color: var(--primary-red);
        box-shadow: 0 0 0 3px rgba(255, 68, 68, 0.2);
      }

      .preview-btn {
        padding: 12px 20px;
        background: linear-gradient(45deg, var(--green-accent), #1AA033);
        color: white;
        border: none;
        border-radius: 10px;
        font-weight: 600;
        cursor: pointer;
        transition: all 0.3s ease;
        white-space: nowrap;
      }

      .preview-btn:hover {
        transform: translateY(-2px);
        box-shadow: 0 4px 15px rgba(34, 204, 68, 0.4);
      }

      .preview-btn:disabled {
        background: #ccc;
        cursor: not-allowed;
        transform: none;
      }

      /* Slider Controls */
      .slider-control {
        display: flex;
        align-items: center;
        gap: 15px;
        margin-top: 10px;
      }

      .slider-control span {
        font-size: 14px;
        color: #666;
        min-width: 50px;
        text-align: center;
      }

      .slider {
        flex: 1;
        height: 8px;
        border-radius: 4px;
        background: #ddd;
        outline: none;
        -webkit-appearance: none;
        transition: all 0.3s ease;
      }

      .slider::-webkit-slider-thumb {
        -webkit-appearance: none;
        width: 24px;
        height: 24px;
        border-radius: 50%;
        background: linear-gradient(45deg, var(--primary-red), var(--dark-red));
        cursor: pointer;
        box-shadow: 0 2px 6px rgba(0, 0, 0, 0.2);
        transition: all 0.2s ease;
      }

      .slider::-webkit-slider-thumb:hover {
        transform: scale(1.2);
        box-shadow: 0 4px 12px rgba(255, 68, 68, 0.4);
      }

      .slider::-moz-range-thumb {
        width: 24px;
        height: 24px;
        border-radius: 50%;
        background: linear-gradient(45deg, var(--primary-red), var(--dark-red));
        cursor: pointer;
        border: none;
        box-shadow: 0 2px 6px rgba(0, 0, 0, 0.2);
      }

      .value-display {
        min-width: 60px;
        text-align: center;
        font-weight: 600;
        color: var(--primary-red);
        background: white;
        padding: 8px 12px;
        border-radius: 8px;
        border: 1px solid var(--primary-orange);
      }

      /* Radio Groups */
      .radio-group {
        display: flex;
        flex-direction: column;
        gap: 12px;
        margin-top: 10px;
      }

      .radio-option {
        display: flex;
        align-items: center;
        gap: 12px;
        padding: 15px;
        background: white;
        border-radius: 10px;
        cursor: pointer;
        transition: all 0.3s ease;
        border: 2px solid transparent;
      }

      .radio-option:hover {
        background: #f0f9ff;
        border-color: var(--primary-orange);
      }

      .radio-option input[type="radio"] {
        display: none;
      }

      .radio-custom {
        width: 20px;
        height: 20px;
        border: 2px solid #ddd;
        border-radius: 50%;
        position: relative;
        transition: all 0.3s ease;
      }

      .radio-option input[type="radio"]:checked + .radio-custom {
        border-color: var(--primary-red);
        background: var(--primary-red);
      }

      .radio-option input[type="radio"]:checked + .radio-custom::after {
        content: '';
        position: absolute;
        top: 50%;
        left: 50%;
        transform: translate(-50%, -50%);
        width: 8px;
        height: 8px;
        border-radius: 50%;
        background: white;
      }

      .radio-text {
        flex: 1;
      }

      .radio-text strong {
        display: block;
        color: var(--text-dark);
        margin-bottom: 2px;
      }

      .radio-text small {
        color: #666;
        font-size: 13px;
      }

      /* Toggle Switches */
      .toggle-setting {
        display: flex;
        justify-content: space-between;
        align-items: center;
        padding: 15px;
        background: white;
        border-radius: 10px;
        margin-bottom: 12px;
        transition: all 0.3s ease;
      }

      .toggle-setting:hover {
        background: #f0f9ff;
      }

      .toggle-info strong {
        display: block;
        color: var(--text-dark);
        margin-bottom: 4px;
      }

      .toggle-info small {
        color: #666;
        font-size: 13px;
      }

      .toggle-switch {
        position: relative;
        display: inline-block;
        width: 56px;
        height: 30px;
      }

      .toggle-switch input {
        opacity: 0;
        width: 0;
        height: 0;
      }

      .toggle-slider {
        position: absolute;
        cursor: pointer;
        top: 0;
        left: 0;
        right: 0;
        bottom: 0;
        background-color: #ccc;
        transition: .4s;
        border-radius: 30px;
      }

      .toggle-slider:before {
        position: absolute;
        content: "";
        height: 24px;
        width: 24px;
        left: 3px;
        bottom: 3px;
        background-color: white;
        transition: .4s;
        border-radius: 50%;
        box-shadow: 0 2px 4px rgba(0, 0, 0, 0.2);
      }

      input:checked + .toggle-slider {
        background-color: var(--green-accent);
      }

      input:checked + .toggle-slider:before {
        transform: translateX(26px);
      }

      /* Modal Footer */
      .modal-footer {
        display: flex;
        justify-content: space-between;
        padding: 20px 30px;
        background: #f8f9fa;
        border-top: 1px solid #eee;
        gap: 15px;
      }

      .secondary-btn {
        padding: 12px 24px;
        background: #6c757d;
        color: white;
        border: none;
        border-radius: 10px;
        font-weight: 600;
        cursor: pointer;
        transition: all 0.3s ease;
      }

      .secondary-btn:hover {
        background: #5a6268;
        transform: translateY(-2px);
      }

      .primary-btn {
        padding: 12px 24px;
        background: linear-gradient(45deg, var(--primary-red), var(--dark-red));
        color: white;
        border: none;
        border-radius: 10px;
        font-weight: 600;
        cursor: pointer;
        transition: all 0.3s ease;
      }

      .primary-btn:hover {
        transform: translateY(-2px);
        box-shadow: 0 4px 15px rgba(255, 68, 68, 0.4);
      }

      /* Transcription Display */
      .transcription-container {
        position: fixed;
        bottom: 20px;
        left: 20px;
        width: 350px;
        max-height: 300px;
        background: white;
        border-radius: 15px;
        box-shadow: 0 10px 30px rgba(0, 0, 0, 0.2);
        z-index: 900;
        border: 2px solid var(--primary-yellow);
        overflow: hidden;
      }

      .transcription-header {
        display: flex;
        justify-content: space-between;
        align-items: center;
        padding: 15px 20px;
        background: linear-gradient(45deg, var(--primary-yellow), #FFE55C);
        color: var(--text-dark);
        font-weight: 600;
      }

      .close-transcription {
        background: none;
        border: none;
        font-size: 1.5rem;
        color: var(--text-dark);
        cursor: pointer;
        padding: 0;
        width: 30px;
        height: 30px;
        border-radius: 50%;
        display: flex;
        align-items: center;
        justify-content: center;
      }

      .close-transcription:hover {
        background: rgba(0, 0, 0, 0.1);
      }

      .transcription-content {
        padding: 15px 20px;
        max-height: 200px;
        overflow-y: auto;
        font-size: 14px;
        line-height: 1.5;
      }

      .transcript-interim {
        color: #666;
        font-style: italic;
        margin-bottom: 8px;
      }

      .transcript-final {
        color: var(--text-dark);
        margin-bottom: 12px;
        font-weight: 500;
      }

      /* Settings Button */
      .settings-button {
        position: fixed;
        top: 20px;
        right: 20px;
        width: 50px;
        height: 50px;
        background: linear-gradient(45deg, var(--primary-orange), var(--primary-yellow));
        color: var(--text-dark);
        border: none;
        border-radius: 50%;
        font-size: 1.5rem;
        cursor: pointer;
        box-shadow: 0 4px 15px rgba(0, 0, 0, 0.2);
        transition: all 0.3s ease;
        z-index: 100;
      }

      .settings-button:hover {
        transform: scale(1.1) rotate(90deg);
        box-shadow: 0 6px 20px rgba(255, 136, 0, 0.4);
      }

      /* Animations */
      @keyframes modalFadeIn {
        from { opacity: 0; }
        to { opacity: 1; }
      }

      @keyframes modalSlideIn {
        from { 
          opacity: 0; 
          transform: scale(0.8) translateY(-50px); 
        }
        to { 
          opacity: 1; 
          transform: scale(1) translateY(0); 
        }
      }

      /* Mobile Responsive */
      @media (max-width: 768px) {
        .modal-content {
          width: 95%;
          max-height: 90vh;
        }

        .modal-header {
          padding: 20px;
        }

        .modal-body {
          padding: 20px;
        }

        .setting-group {
          padding: 15px;
        }

        .voice-control {
          flex-direction: column;
        }

        .slider-control {
          flex-wrap: wrap;
          gap: 10px;
        }

        .transcription-container {
          left: 10px;
          right: 10px;
          width: auto;
        }

        .settings-button {
          top: 10px;
          right: 10px;
        }
      }
    </style>
  </head>

  <body>
    <div class="container">
      <div class="header">
        <div class="logo">üçî Comida R√°pida Fant√°stica</div>
        <div class="tagline">¬°F√©lix, tu Amigo del Sabor te est√° esperando!</div>
      </div>
      
      <div class="menu-section">
        <div class="menu-title">üçü Nuestro Men√∫ Fant√°stico</div>
        
        <!-- Combos Especiales -->
        <div class="combo-section sparkle">
          <div class="combo-title">¬°COMBOS INCRE√çBLES!</div>
          <div class="combo-item">
            <strong>Combo Fant√°stico Cl√°sico</strong><br>
            Hamburguesa + Papitas + Refresco<br>
            <span class="combo-savings">¬°Ahorra $2.00! Solo $5.00</span>
          </div>
          <div class="combo-item">
            <strong>Combo Doble Delicia</strong><br>
            Doble carne + Papitas + Refresco<br>
            <span class="combo-savings">¬°Ahorra $1.50! Solo $7.00</span>
          </div>
        </div>
        
        <!-- S√°ndwiches -->
        <div class="menu-category">
          <div class="category-title">üçî S√ÅNDWICHES</div>
          <div class="menu-item" data-product="Cl√°sica con Queso CRF">
            <div class="item-info">
              <div class="item-name">Cl√°sica con Queso CRF</div>
              <div class="item-description">La estrella con queso derretido</div>
            </div>
            <div class="item-price">$3.50</div>
          </div>
          <div class="menu-item" data-product="Doble Delicia CRF">
            <div class="item-info">
              <div class="item-name">Doble Delicia CRF</div>
              <div class="item-description">Doble carne, doble sabor</div>
            </div>
            <div class="item-price">$5.00</div>
          </div>
          <div class="menu-item" data-product="Pollo Fant√°stico Crujiente">
            <div class="item-info">
              <div class="item-name">Pollo Fant√°stico Crujiente</div>
              <div class="item-description">S√∫per crujiente y delicioso</div>
            </div>
            <div class="item-price">$4.00</div>
          </div>
          <div class="menu-item" data-product="Rey Tocino CRF">
            <div class="item-info">
              <div class="item-name">Rey Tocino CRF</div>
              <div class="item-description">Para√≠so para amantes del tocino</div>
            </div>
            <div class="item-price">$6.00</div>
          </div>
        </div>
        
        <!-- Acompa√±amientos -->
        <div class="menu-category">
          <div class="category-title">üçü ACOMPA√ëAMIENTOS</div>
          <div class="menu-item" data-product="Papitas Fant√°sticas (Medianas)">
            <div class="item-info">
              <div class="item-name">Papitas Fant√°sticas (M)</div>
              <div class="item-description">Doradas y crujientes</div>
            </div>
            <div class="item-price">$2.00</div>
          </div>
          <div class="menu-item" data-product="Aros de Cebolla Dorados (M)">
            <div class="item-info">
              <div class="item-name">Aros de Cebolla (M)</div>
              <div class="item-description">Crujientes por fuera</div>
            </div>
            <div class="item-price">$2.50</div>
          </div>
        </div>
        
        <!-- Postres -->
        <div class="menu-category">
          <div class="category-title">üç® POSTRES</div>
          <div class="menu-item" data-product="Batido Fantas√≠a (Choc. Croc.)">
            <div class="item-info">
              <div class="item-name">Batido Fantas√≠a</div>
              <div class="item-description">Con trocitos crocantes</div>
            </div>
            <div class="item-price">$3.00</div>
          </div>
          <div class="menu-item" data-product="Conito Helado">
            <div class="item-info">
              <div class="item-name">Conito Helado</div>
              <div class="item-description">La opci√≥n m√°s econ√≥mica</div>
            </div>
            <div class="item-price">$1.00</div>
          </div>
        </div>
        
        <!-- Bebidas -->
        <div class="menu-category">
          <div class="category-title">ü•§ BEBIDAS</div>
          <div class="menu-item" data-product="Refresco (Mediano)">
            <div class="item-info">
              <div class="item-name">Refresco (Mediano)</div>
              <div class="item-description">Varios sabores disponibles</div>
            </div>
            <div class="item-price">$1.50</div>
          </div>
          <div class="menu-item" data-product="Jugo de Naranja (Peque√±o)">
            <div class="item-info">
              <div class="item-name">Jugo de Naranja</div>
              <div class="item-description">Natural y refrescante</div>
            </div>
            <div class="item-price">$2.00</div>
          </div>
        </div>
      </div>
      
      <div class="chat-section">
        <div class="chat-header">
          <span class="felix-avatar">üçî</span>
          <strong>F√©lix, tu Amigo del Sabor</strong> - ¬°Listo para crear tu comida fant√°stica!
        </div>
        
        <div id="messages">
          <div id="typing-indicator" class="typing-indicator">
            <span></span>
            <span></span>
            <span></span>
          </div>
        </div>
        
        <form id="messageForm">
          <input type="text" id="message" name="message" placeholder="¬°Habla con F√©lix! Ej: 'Quiero un combo cl√°sico'..." autocomplete="off" />
          <button type="submit" id="sendButton" disabled>Enviar</button>
          <button type="button" id="startAudioButton">üé§ Voz</button>
          <button type="button" id="stopAudioButton">üõë Parar</button>
        </form>
      </div>
      
      <!-- Order Section (Third Column) -->
      <div class="order-section">
        <div class="current-order">
          <div class="order-title">üõí Tu Pedido Actual</div>
          <div id="current-order-items">
            <div id="empty-order-message" style="text-align: center; color: #999; font-style: italic;">
              ¬°Habla con F√©lix para hacer tu pedido!
            </div>
          </div>
          <div id="order-total" class="order-total" style="display: none;">
            Total: $<span id="total-amount">0.00</span>
          </div>
          <button id="clear-order-btn" class="clear-order-btn" style="display: none;">
            üóëÔ∏è Limpiar Pedido
          </button>
        </div>
      </div>
    </div>
    
    <!-- Settings Button -->
    <button id="settings-button" class="settings-button" title="Configuraci√≥n de Audio">
      ‚öôÔ∏è
    </button>
    
    <div class="status-indicator">
      <div class="status-item">
        <div id="status-dot" class="status-dot"></div>
        <span id="connection-status">Conectando...</span>
      </div>
      <div class="status-item" id="recording-container" style="display: none;">
        <div class="status-dot recording"></div>
        <span id="recording-status">Grabando</span>
      </div>
    </div>

    <!-- Settings Modal -->
    <div id="settings-modal" class="settings-modal">
      <div class="modal-content">
        <div class="modal-header">
          <h2>‚öôÔ∏è Configuraci√≥n de Audio</h2>
          <button id="close-settings" class="close-button">&times;</button>
        </div>
        
        <div class="modal-body">
          <!-- Voice Selection -->
          <div class="setting-group">
            <h3>üéôÔ∏è Voz de F√©lix</h3>
            <div class="voice-control">
              <select id="voice-select">
                <option value="Leda">Leda (Amigable)</option>
                <option value="Puck">Puck (En√©rgico)</option>
                <option value="Charon">Charon (Profundo)</option>
                <option value="Kore">Kore (Neutro)</option>
                <option value="Fenrir">Fenrir (Fuerte)</option>
                <option value="Aoede">Aoede (Mel√≥dico)</option>
                <option value="Orus">Orus (Autoritario)</option>
                <option value="Zephyr">Zephyr (Suave)</option>
              </select>
              <button id="preview-voice" class="preview-btn">üîä Escuchar</button>
            </div>
          </div>

          <!-- Voice Speed -->
          <div class="setting-group">
            <h3>‚ö° Velocidad de Voz</h3>
            <div class="slider-control">
              <span>Lento</span>
              <input type="range" id="voice-speed" class="slider" min="0.5" max="2.0" step="0.1" value="1.0">
              <span>R√°pido</span>
              <span id="speed-value" class="value-display">1.0x</span>
            </div>
          </div>

          <!-- Microphone Sensitivity -->
          <div class="setting-group">
            <h3>üé§ Sensibilidad del Micr√≥fono</h3>
            <div class="slider-control">
              <span>Bajo</span>
              <input type="range" id="mic-sensitivity" class="slider" min="0.1" max="1.0" step="0.1" value="0.7">
              <span>Alto</span>
              <span id="sensitivity-value" class="value-display">70%</span>
            </div>
          </div>

          <!-- Playback Volume -->
          <div class="setting-group">
            <h3>üîä Volumen de Reproducci√≥n</h3>
            <div class="slider-control">
              <span>Bajo</span>
              <input type="range" id="playback-volume" class="slider" min="0.1" max="1.0" step="0.1" value="0.8">
              <span>Alto</span>
              <span id="volume-value" class="value-display">80%</span>
            </div>
          </div>

          <!-- Audio Quality -->
          <div class="setting-group">
            <h3>üéµ Calidad de Audio</h3>
            <div class="radio-group">
              <label class="radio-option">
                <input type="radio" name="audio-quality" value="low">
                <span class="radio-custom"></span>
                <div class="radio-text">
                  <strong>Baja</strong>
                  <small>Menor uso de datos</small>
                </div>
              </label>
              <label class="radio-option">
                <input type="radio" name="audio-quality" value="medium" checked>
                <span class="radio-custom"></span>
                <div class="radio-text">
                  <strong>Media</strong>
                  <small>Equilibrio calidad/datos</small>
                </div>
              </label>
              <label class="radio-option">
                <input type="radio" name="audio-quality" value="high">
                <span class="radio-custom"></span>
                <div class="radio-text">
                  <strong>Alta</strong>
                  <small>M√°xima calidad</small>
                </div>
              </label>
            </div>
          </div>

          <!-- Accessibility Features -->
          <div class="setting-group">
            <h3>‚ôø Accesibilidad</h3>
            
            <div class="toggle-setting">
              <div class="toggle-info">
                <strong>Push-to-Talk</strong>
                <small>Mant√©n presionada la barra espaciadora para hablar</small>
              </div>
              <label class="toggle-switch">
                <input type="checkbox" id="push-to-talk">
                <span class="toggle-slider"></span>
              </label>
            </div>

            <div class="toggle-setting">
              <div class="toggle-info">
                <strong>Mostrar Transcripci√≥n</strong>
                <small>Mostrar texto de lo que dices y escuchas</small>
              </div>
              <label class="toggle-switch">
                <input type="checkbox" id="show-transcription">
                <span class="toggle-slider"></span>
              </label>
            </div>
          </div>
        </div>

        <div class="modal-footer">
          <button id="reset-settings" class="secondary-btn">üîÑ Restablecer</button>
          <button id="save-settings" class="primary-btn">üíæ Guardar</button>
        </div>
      </div>
    </div>

    <!-- Transcription Display -->
    <div id="transcription-display" class="transcription-container" style="display: none;">
      <div class="transcription-header">
        <span>üìù Transcripci√≥n</span>
        <button id="close-transcription" class="close-transcription">&times;</button>
      </div>
      <div id="transcription-content" class="transcription-content">
        <!-- Transcription text will appear here -->
      </div>
    </div>
    
    <script>
      // Order management
      let currentOrder = { items: [], total: 0.0 };
      let orderUpdateInterval;
      
      // Update order display
      function updateOrderDisplay(order) {
        const orderItemsDiv = document.getElementById('current-order-items');
        const emptyMessage = document.getElementById('empty-order-message');
        const orderTotalDiv = document.getElementById('order-total');
        const totalAmount = document.getElementById('total-amount');
        const clearBtn = document.getElementById('clear-order-btn');
        
        if (order.items && order.items.length > 0) {
          // Hide empty message
          emptyMessage.style.display = 'none';
          
          // Build order items HTML
          let itemsHTML = '';
          order.items.forEach(item => {
            itemsHTML += `
              <div class="order-item">
                <div class="order-item-details">
                  <div class="order-item-name">${item.producto}</div>
                  <div class="order-item-quantity">Cantidad: ${item.cantidad}</div>
                </div>
                <div class="order-item-price">$${item.subtotal.toFixed(2)}</div>
              </div>
            `;
          });
          
          // Update items display
          orderItemsDiv.innerHTML = emptyMessage.outerHTML + itemsHTML;
          
          // Show total and clear button
          orderTotalDiv.style.display = 'block';
          totalAmount.textContent = order.total.toFixed(2);
          clearBtn.style.display = 'block';
          
          // Add success animation
          orderItemsDiv.classList.add('order-success');
          setTimeout(() => orderItemsDiv.classList.remove('order-success'), 500);
        } else {
          // Show empty message
          emptyMessage.style.display = 'block';
          orderItemsDiv.innerHTML = emptyMessage.outerHTML;
          orderTotalDiv.style.display = 'none';
          clearBtn.style.display = 'none';
        }
      }
      
      // Fetch current order from API
      async function fetchCurrentOrder() {
        try {
          const response = await fetch('/api/pedido/default');
          const data = await response.json();
          
          if (data.success && data.pedido) {
            // Check if order has changed
            if (JSON.stringify(currentOrder) !== JSON.stringify(data.pedido)) {
              currentOrder = data.pedido;
              updateOrderDisplay(currentOrder);
            }
          }
        } catch (error) {
          console.error('Error fetching order:', error);
        }
      }
      
      // Clear order
      async function clearOrder() {
        const messageInput = document.getElementById('message');
        messageInput.value = 'Quiero cancelar mi pedido actual';
        document.getElementById('sendButton').click();
      }
      
      // Start polling for order updates
      function startOrderPolling() {
        // Initial fetch
        fetchCurrentOrder();
        
        // Poll every 2 seconds
        orderUpdateInterval = setInterval(fetchCurrentOrder, 2000);
      }
      
      // Stop polling
      function stopOrderPolling() {
        if (orderUpdateInterval) {
          clearInterval(orderUpdateInterval);
        }
      }
      
      // Add menu item click functionality
      document.addEventListener('DOMContentLoaded', function() {
        const menuItems = document.querySelectorAll('.menu-item[data-product]');
        const messageInput = document.getElementById('message');
        const clearBtn = document.getElementById('clear-order-btn');
        
        // Start order polling when connected
        const originalOnOpen = window.onWebSocketOpen || function() {};
        window.onWebSocketOpen = function() {
          originalOnOpen();
          startOrderPolling();
        };
        
        // Stop polling when disconnected
        const originalOnClose = window.onWebSocketClose || function() {};
        window.onWebSocketClose = function() {
          originalOnClose();
          stopOrderPolling();
        };
        
        menuItems.forEach(item => {
          item.addEventListener('click', function() {
            const productName = this.dataset.product;
            const price = this.querySelector('.item-price').textContent;
            
            // Add visual feedback
            this.style.transform = 'scale(0.95)';
            setTimeout(() => {
              this.style.transform = '';
            }, 150);
            
            // Pre-fill the message input
            messageInput.value = `Quiero ${productName}`;
            messageInput.focus();
          });
        });
        
        // Add combo button functionality
        const comboItems = document.querySelectorAll('.combo-item');
        comboItems.forEach(item => {
          item.style.cursor = 'pointer';
          item.addEventListener('click', function() {
            const comboText = this.querySelector('strong').textContent;
            messageInput.value = `Quiero el ${comboText}`;
            messageInput.focus();
          });
        });
        
        // Clear order button
        if (clearBtn) {
          clearBtn.addEventListener('click', function() {
            if (confirm('¬øEst√°s seguro de que quieres limpiar tu pedido?')) {
              clearOrder();
            }
          });
        }
        
        // Quick order suggestions
        const quickOrders = [
          { text: 'üçî Combo Cl√°sico', value: 'Quiero el Combo Fant√°stico Cl√°sico' },
          { text: 'üçü Solo Papitas', value: 'Quiero Papitas Fant√°sticas (Medianas)' },
          { text: 'ü•§ Solo Bebida', value: 'Quiero un Refresco (Mediano)' },
          { text: 'üç® Postre', value: 'Quiero un Conito Helado' }
        ];
        
        // Add quick order buttons after the message form
        const messageForm = document.getElementById('messageForm');
        const quickOrderDiv = document.createElement('div');
        quickOrderDiv.style.cssText = 'display: flex; gap: 10px; padding: 10px 16px; flex-wrap: wrap;';
        
        quickOrders.forEach(order => {
          const btn = document.createElement('button');
          btn.textContent = order.text;
          btn.type = 'button';
          btn.style.cssText = 'padding: 8px 15px; font-size: 12px; background: var(--primary-yellow); color: var(--text-dark); border-radius: 20px;';
          btn.addEventListener('click', function() {
            messageInput.value = order.value;
            messageInput.focus();
          });
          quickOrderDiv.appendChild(btn);
        });
        
        messageForm.parentNode.insertBefore(quickOrderDiv, messageForm.nextSibling);
      });
      
      // Listen for WebSocket messages to detect order changes
      const originalHandleMessage = window.handleWebSocketMessage || function() {};
      window.handleWebSocketMessage = function(message) {
        originalHandleMessage(message);
        
        // Check if message mentions order update
        if (message.data && (
          message.data.includes('agregado') || 
          message.data.includes('pedido') ||
          message.data.includes('confirmado')
        )) {
          // Fetch order immediately
          setTimeout(fetchCurrentOrder, 500);
        }
      };

      // Settings Modal Functionality
      class AudioSettings {
        constructor() {
          this.settings = this.loadSettings();
          this.observers = [];
          this.setupEventListeners();
          this.updateUIFromSettings();
        }

        loadSettings() {
          const defaults = {
            voice: {
              name: "Leda",
              speed: 1.0
            },
            audio: {
              micSensitivity: 0.7,
              playbackVolume: 0.8,
              quality: "medium",
              pushToTalk: false,
              showTranscription: false
            }
          };
          
          const saved = localStorage.getItem('felixAudioSettings');
          return saved ? { ...defaults, ...JSON.parse(saved) } : defaults;
        }

        saveSettings() {
          localStorage.setItem('felixAudioSettings', JSON.stringify(this.settings));
          this.notifyObservers();
        }

        subscribe(callback) {
          this.observers.push(callback);
        }

        notifyObservers() {
          this.observers.forEach(cb => cb(this.settings));
        }

        setupEventListeners() {
          const modal = document.getElementById('settings-modal');
          const settingsBtn = document.getElementById('settings-button');
          const closeBtn = document.getElementById('close-settings');
          const saveBtn = document.getElementById('save-settings');
          const resetBtn = document.getElementById('reset-settings');

          // Open modal
          settingsBtn.addEventListener('click', () => {
            modal.classList.add('show');
          });

          // Close modal
          const closeModal = () => {
            modal.classList.remove('show');
          };

          closeBtn.addEventListener('click', closeModal);
          modal.addEventListener('click', (e) => {
            if (e.target === modal) closeModal();
          });

          // Escape key to close
          document.addEventListener('keydown', (e) => {
            if (e.key === 'Escape' && modal.classList.contains('show')) {
              closeModal();
            }
          });

          // Voice selection
          const voiceSelect = document.getElementById('voice-select');
          voiceSelect.addEventListener('change', (e) => {
            this.settings.voice.name = e.target.value;
          });

          // Voice preview
          const previewBtn = document.getElementById('preview-voice');
          previewBtn.addEventListener('click', () => {
            this.previewVoice();
          });

          // Voice speed slider
          const speedSlider = document.getElementById('voice-speed');
          const speedValue = document.getElementById('speed-value');
          speedSlider.addEventListener('input', (e) => {
            const value = parseFloat(e.target.value);
            this.settings.voice.speed = value;
            speedValue.textContent = value.toFixed(1) + 'x';
          });

          // Microphone sensitivity slider
          const micSlider = document.getElementById('mic-sensitivity');
          const micValue = document.getElementById('sensitivity-value');
          micSlider.addEventListener('input', (e) => {
            const value = parseFloat(e.target.value);
            this.settings.audio.micSensitivity = value;
            micValue.textContent = Math.round(value * 100) + '%';
          });

          // Playback volume slider
          const volumeSlider = document.getElementById('playback-volume');
          const volumeValue = document.getElementById('volume-value');
          volumeSlider.addEventListener('input', (e) => {
            const value = parseFloat(e.target.value);
            this.settings.audio.playbackVolume = value;
            volumeValue.textContent = Math.round(value * 100) + '%';
          });

          // Audio quality radio buttons
          const qualityInputs = document.querySelectorAll('input[name="audio-quality"]');
          qualityInputs.forEach(input => {
            input.addEventListener('change', (e) => {
              if (e.target.checked) {
                this.settings.audio.quality = e.target.value;
              }
            });
          });

          // Push-to-talk toggle
          const pushToTalkToggle = document.getElementById('push-to-talk');
          pushToTalkToggle.addEventListener('change', (e) => {
            this.settings.audio.pushToTalk = e.target.checked;
          });

          // Show transcription toggle
          const transcriptionToggle = document.getElementById('show-transcription');
          transcriptionToggle.addEventListener('change', (e) => {
            this.settings.audio.showTranscription = e.target.checked;
            this.toggleTranscriptionDisplay(e.target.checked);
          });

          // Transcription close button
          const closeTranscription = document.getElementById('close-transcription');
          if (closeTranscription) {
            closeTranscription.addEventListener('click', () => {
              document.getElementById('transcription-display').style.display = 'none';
              transcriptionToggle.checked = false;
              this.settings.audio.showTranscription = false;
            });
          }

          // Save settings
          saveBtn.addEventListener('click', () => {
            this.saveSettings();
            this.showNotification('‚öôÔ∏è Configuraci√≥n guardada correctamente');
            closeModal();
          });

          // Reset settings
          resetBtn.addEventListener('click', () => {
            if (confirm('¬øEst√°s seguro de que quieres restablecer todas las configuraciones?')) {
              this.resetToDefaults();
              this.showNotification('üîÑ Configuraci√≥n restablecida');
            }
          });
        }

        updateUIFromSettings() {
          // Voice settings
          document.getElementById('voice-select').value = this.settings.voice.name;
          document.getElementById('voice-speed').value = this.settings.voice.speed;
          document.getElementById('speed-value').textContent = this.settings.voice.speed.toFixed(1) + 'x';

          // Audio settings
          document.getElementById('mic-sensitivity').value = this.settings.audio.micSensitivity;
          document.getElementById('sensitivity-value').textContent = Math.round(this.settings.audio.micSensitivity * 100) + '%';
          
          document.getElementById('playback-volume').value = this.settings.audio.playbackVolume;
          document.getElementById('volume-value').textContent = Math.round(this.settings.audio.playbackVolume * 100) + '%';

          // Quality selection
          const qualityInput = document.querySelector(`input[name="audio-quality"][value="${this.settings.audio.quality}"]`);
          if (qualityInput) {
            qualityInput.checked = true;
          }

          // Toggles
          document.getElementById('push-to-talk').checked = this.settings.audio.pushToTalk;
          document.getElementById('show-transcription').checked = this.settings.audio.showTranscription;

          // Apply transcription visibility
          this.toggleTranscriptionDisplay(this.settings.audio.showTranscription);
        }

        async previewVoice() {
          const previewBtn = document.getElementById('preview-voice');
          const originalText = previewBtn.textContent;
          
          try {
            previewBtn.disabled = true;
            previewBtn.textContent = '‚è≥ Cargando...';
            
            // For now, just show a notification - voice preview would need backend implementation
            await new Promise(resolve => setTimeout(resolve, 1000)); // Simulate loading
            this.showNotification(`üîä Vista previa de voz: ${this.settings.voice.name}`);
            
          } catch (error) {
            console.error('Voice preview error:', error);
            this.showNotification('‚ùå Error al reproducir vista previa');
          } finally {
            previewBtn.disabled = false;
            previewBtn.textContent = originalText;
          }
        }

        toggleTranscriptionDisplay(show) {
          const transcriptionDisplay = document.getElementById('transcription-display');
          if (transcriptionDisplay) {
            transcriptionDisplay.style.display = show ? 'block' : 'none';
          }
        }

        resetToDefaults() {
          this.settings = {
            voice: {
              name: "Leda",
              speed: 1.0
            },
            audio: {
              micSensitivity: 0.7,
              playbackVolume: 0.8,
              quality: "medium",
              pushToTalk: false,
              showTranscription: false
            }
          };
          this.updateUIFromSettings();
        }

        showNotification(message) {
          const notification = document.createElement('div');
          notification.style.cssText = `
            position: fixed;
            top: 80px;
            right: 20px;
            background: linear-gradient(45deg, var(--primary-orange), var(--primary-yellow));
            color: var(--text-dark);
            padding: 15px 25px;
            border-radius: 10px;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.2);
            z-index: 1100;
            font-weight: 600;
            animation: slideInRight 0.3s ease-out;
          `;
          notification.textContent = message;
          document.body.appendChild(notification);

          setTimeout(() => {
            notification.style.animation = 'slideOutRight 0.3s ease-out';
            setTimeout(() => notification.remove(), 300);
          }, 3000);
        }
      }

      // Initialize settings when DOM is loaded
      let audioSettings;
      document.addEventListener('DOMContentLoaded', function() {
        // Initialize audio settings
        audioSettings = new AudioSettings();

        // Subscribe to settings changes
        audioSettings.subscribe((settings) => {
          console.log('Settings updated:', settings);
          // Here you can apply the settings to audio components
          // For example, update microphone sensitivity, playback volume, etc.
        });
      });

      // Add notification animations CSS
      const notificationStyle = document.createElement('style');
      notificationStyle.textContent = `
        @keyframes slideInRight {
          from {
            transform: translateX(100%);
            opacity: 0;
          }
          to {
            transform: translateX(0);
            opacity: 1;
          }
        }
        
        @keyframes slideOutRight {
          from {
            transform: translateX(0);
            opacity: 1;
          }
          to {
            transform: translateX(100%);
            opacity: 0;
          }
        }
      `;
      document.head.appendChild(notificationStyle);
    </script>
  </body>
</html>
